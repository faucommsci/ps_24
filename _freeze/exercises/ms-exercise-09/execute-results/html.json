{
  "hash": "cbe12a67f6f38357fd25cb00c075b666",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Unsupervised Machine Learning I\"\nsubtitle: \"Session 09 - Exercise\"\ndate: last-modified\ndate-format: \"DD.MM.YYYY\"\nformat:\n    html: \n        code-fold: true\n        code-summary: \"L√∂sung anzeigen\"\n---\n\n\n::: {.callout-tip icon=\"false\"}\n[![Quarto Document](https://raw.githubusercontent.com/faucommsci/teaching_materials/main/images/badges/badge-quarto_document.svg)](https://github.com/faucommsci/ps_24/blob/main/exercises/ms-exercise-09.qmd) Link to source file\n:::\n\n::: callout-note\n## Ziel der Anwendung: Textanalyse in R kennenlernen\n\n-   Typische Schritte der Textanalyse mit `quanteda` kennenlernen, von der Tokenisierung bis zur Visualisierung.\n:::\n\n## Background\n\n::: callout-tip\n## Todays's data basis: [OpenAlex](https://openalex.org/)\n\n-   Via API bzw. openalexR [@aria2024] gesammelte \"works\" der Datenbank [OpenAlex](https://openalex.org/) mit Bezug zu Literaturriews in den Sozialwissenschaften zwischen 2013 und 2023\n\n-   Detaillierte Informationen und Ergebnisse zur Suchquery finden Sie [hier](https://openalex.org/works?page=1&filter=display_name.search%3A%28literature%20OR%20systematic%29%20AND%20review,primary_topic.domain.id%3Adomains%2F2,publication_year%3A2014%20-%202024&group_by=publication_year,open_access.is_oa,primary_topic.field.id).\n:::\n\n## Preparation\n\n::: callout-important\n## Wichtige Information\n\n-   Bitte stellen Sie sicher, dass Sie das jeweilige R-Studio Projekt zur √úbung ge√∂ffnet haben. Nur so funktionieren alle Dependencies korrekt.\n-   Um den einwandfreien Ablauf der √úbung zu gew√§hrleisten, wird f√ºr die Aufgaben auf eine eigenst√§ndige Datenerhebung verzichtet und ein √úbungsdatensatz zu verf√ºgung gestelt.\n:::\n\n### Packages\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n    here, qs, # file management\n    magrittr, janitor, # data wrangling\n    easystats, sjmisc, # data analysis\n    gt, gtExtras, # table visualization\n    ggpubr, ggwordcloud, # visualization\n    # text analysis    \n    tidytext, widyr, # based on tidytext\n    quanteda, # based on quanteda\n    quanteda.textmodels, quanteda.textplots, quanteda.textstats, \n    openalexR, \n    tidyverse # load last to avoid masking issues\n  )\n```\n:::\n\n\n### Import und Vorverarbeitung der Daten\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# Import from local\nreview_works <- qs::qread(here(\"data/session-07/openalex-review_works-2013_2023.qs\"))\n\n# Create correct data\nreview_works_correct <- review_works %>% \n    mutate(\n        # Create additional factor variables\n        publication_year_fct = as.factor(publication_year), \n        type_fct = as.factor(type)\n        )\n\n# Create subsample\nreview_subsample <- review_works_correct %>%\n    # Eingrenzung: Sprache und Typ\n    filter(language == \"en\") %>% \n    filter(type == \"article\") %>%\n    # Eingrenzung: Keine Eintr√§ge ohne Abstract\n    filter(!is.na(ab)) %>% \n    # Datentranformation\n    unnest(topics, names_sep = \"_\") %>%\n    filter(topics_name == \"field\" ) %>% \n    filter(topics_i == \"1\") %>% \n    # Eingrenzung: Forschungsfeldes\n    filter(\n    topics_display_name == \"Social Sciences\"|\n    topics_display_name == \"Psychology\"\n    ) %>% \n    # Eingrenzung: Keine Eintr√§ge ohne Abstract\n    filter(!is.na(ab))   \n```\n:::\n\n\n### Erstellung Korpus & DFM\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create corpus\nquanteda_corpus <- review_subsample %>% \n  quanteda::corpus(\n    docid_field = \"id\", \n    text_field = \"ab\"\n  )\n\n# Tokenize\nquanteda_token <- quanteda_corpus %>% \n  quanteda::tokens(\n    remove_punct = TRUE,\n    remove_symbols = TRUE, \n    remove_numbers = TRUE, \n    remove_url = TRUE, \n    split_tags = FALSE # keep hashtags and mentions\n  ) %>% \n  quanteda::tokens_tolower() %>% \n  quanteda::tokens_remove(\n    pattern = stopwords(\"en\")\n    )\n\n# Convert to Document-Feature-Matrix (DFM)\nquanteda_dfm <- quanteda_token %>% \n  quanteda::dfm()\n```\n:::\n\n\n## üõ†Ô∏è Praktische Anwendung\n\n::: callout-important\n## Achtung, bitte lesen!\n\n-   Bevor Sie mit der Arbeit an den folgenden üìã **Exercises** beginnen, stellen Sie bitte sicher, dass Sie alle Chunks des Abschnitts [Preparation] gerendert haben. Das k√∂nnen Sie tun, indem Sie den \"*Run all chunks above*\"-Knopf ![](/img/rstudio-button-render_all_chunks_above.png)des n√§chsten Chunks benutzen.\n-   Bei Fragen zum Code lohnt sich ein Blick in den **Showcase** (.qmd oder .html). Beim Showcase handelt es sich um eine kompakte Darstellung des in der Pr√§sentation verwenden R-Codes. Sie k√∂nnen das Showcase also nutzen, um sich die Code-Bausteine anzusehen, die f√ºr die R-Outputs auf den Slides benutzt wurden.\n:::\n\n### üìã Exercise 1: Cleaned DFM\n\n::: callout-caution\n## Ziel der Aufgabe\n\n<!-- FIXME Ziele der √úbung erg√§nzen -->\n:::\n\n1.  Erstelen Sie einen neuen Datensatz `quanteda_dfm_cleaned`\n    -   basierend auf dem Datensatz `quanteda_dfm`\n        1.  Verwenden Sie `quanteda::dfm_remove(pattern = c(\"systematic\", \"literature\", \"review\")`, um die Suchquery zu entfernen.\n        2.  Speichern Sie diese Umwandlung, indem Sie einen neuen Datensatz mit dem Namen `quanteda_dfm_cleaned` erstellen.\n2.  √úberpr√ºfen Sie die Transformation indem Sie `quanteda_dfm_cleaned` in die Konsole eingeben.\n3.  ‚úçÔ∏è Notieren Sie, wie viele Dokumente & Features in `quanteda_dfm_cleaned` enthalten sind.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# `quanteda_dfm_cleaned` erstellen\n\n# √úberpr√ºfung\n\n# Notiz:\n# `quanteda_dfm_cleaned` enth√§lt 36680 Dokumente und 135074 Features.\n```\n:::\n\n\n### üìã Exercise 2: Neues Netzwerk der Top-Begriffe\n\n::: callout-caution\n## Ziel der Aufgabe\n\n-   Erstellung eines neuen Datensatzes `review_subsample_new`, der sich auf *englischsprachig* *B√ºcher bzw. Buchrartikel* beschr√§nkt.\n:::\n\n1.  Neues Dataset `top_features_quanteda` erstellen\n    -   Basierend auf dem Dataset `quanteda_dfm_cleaned`,\n    -   Verwenden Sie `quanteda::topfeatures(20)`, um die 20 h√§ufigsten Begriffe zu extrahieren.\n    -   Verwenden Sie `names()`, um nur die Namen (nicht die Werte) zu speichern.\n    -   Speichern Sie diese Transformation, indem Sie einen neuen Datensatz mit dem Namen `top_features_quanteda` erstellen.\n2.  Visualisierung des Netzwerks an Top-Begriffen\n    -   Basierend auf dem Dataset quanteda_dfm_cleaned,\n    -   Transformieren Sie die Daten mit `quanteda::fcm()` in eine Feature-Co-Occurrence-Matrix \\[FCM\\].\n    -   Auswahl relevanter Hashtags mit `quanteda::fcm_select(pattern = top_hashtags_quanteda, case_insensitive = FALSE)`.\n    -   Visualisierung mit `quanteda.textplots::textplot_network()`.\n3.  Ergebnisse interpretieren und vergleichen\n    -   Analysieren Sie die Beziehungen zwischen den Top-Begriffen.\n    -   Vergleichen Sie die Ergebnisse mit den Auswertungen der Folien. Welche Unterschiede gibt es?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create top features\n\n# Visualisierung des Netzwerks an Top-Begriffen\n```\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}